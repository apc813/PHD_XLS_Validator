---
title: "R Notebook"
output: html_notebook
editor_options: 
  chunk_output_type: inline
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r}
library(rstudioapi)
library(tidyverse)

# install.packages("plotly")
library(plotly)
```


```{r}
str_fldrpath =  file.path("W:","GitHub","PHD_XLS_Validator","Version4")

```


```{r}
# str_filepath_coordinates = selectFile(caption="Select file with 3d co-ordinates",
#                                       path = str_fldrpath,
#                                       filter = "Text files (*.txt)",
#                                       existing = TRUE)
str_filepath_coordinates = "W:/GitHub/PHD_XLS_Validator/Version4/Fucaial_UWBM84024/Fucaial_UWBM84024_aligned_combined_79points_unsorted.txt"

df_coords <- read.csv(str_filepath_coordinates,
                   header=FALSE,
                   col.names=c("X","Y","Z"))

df_coords <- df_coords|>
                  mutate(pt.color=rainbow(nrow(df_coords),end=0.75))|>
                  mutate(pt.shape=16)

# vctr_axis = c(plyr::round_any(min(min(df_coords$X),min(df_coords$Y),min(df_coords$Z)),10,f=floor),
#               plyr::round_any(max(max(df_coords$X),max(df_coords$Y),max(df_coords$Z)),10,f=ceiling))

plot_ly(df_coords, 
        x = ~X, y = ~Y, z = ~Z, 
        type = 'scatter3d',
        mode = 'lines',
        line = list(width = 6, color = ~pt.color, shape="spline",smoothing=0), #, reverscale = FALSE),
        # split = ~pt.shape,
        opacity = 1)
```

```{r}
str_filepath_coords_arch = selectFile(caption="Select file with 3d co-ordinates - Arch",
                                      path = str_fldrpath,
                                      filter = "Text files (*.txt)",
                                      existing = TRUE)


str_filepath_coords_base = selectFile(caption="Select file with 3d co-ordinates - Base",
                                      path = dirname(str_filepath_coords_arch),
                                      filter = "Text files (*.txt)",
                                      existing = TRUE)


df_csv_arch <- read.csv(str_filepath_coords_arch,
                   header=FALSE,
                   col.names=c("X","Y","Z"))
df_csv_base <- read.csv(str_filepath_coords_base,
                   header=FALSE,
                   col.names=c("X","Y","Z"))
df_coords_comb <- df_csv_arch|>
                  mutate(pt.color=rainbow(nrow(df_csv_arch),end = 0.75))|>
                  mutate(pt.shape=16)
df_coords_comb <- df_coords_comb|>
            bind_rows(df_csv_base|>
                        mutate(pt.color=rainbow(nrow(df_csv_base),end = 0.75))|>
                        mutate(pt.shape=17))
# df_coords_comb <- df_coords_comb|>
#                         mutate(pt.color=rainbow(nrow(df_coords_comb),end = 0.75))

plot_ly(df_coords_comb, 
        x = ~X, y = ~Y, z = ~Z, 
        type = 'scatter3d',
        mode = 'lines',
        line = list(width = 6, color = ~pt.color, shape="spline",smoothing=0), #, reverscale = FALSE),
        split = ~pt.shape,
        opacity = 1)

```
